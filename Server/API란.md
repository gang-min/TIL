# API란?

![api](/image/api.png)

- `API는 '프로그램과 프로그램을 연결시켜주는 매개체'이다.`

* 보통 프로그램끼리 통신을 하기 위해선 프로그램을 만드는 개발자가 해당 프로그램이 잘 통신할 수 있도록 `규칙`들을 잘 설계하는 게 중요하다.

* 이때 아래와 같은 경우에는 프로그램끼리 통신하기 힘들다.

  1. 접근할 프로그램의 규칙이 잘 짜여지지 않고 복잡한 경우

  2. 프로그램 보안 상 외부에서 누구나 사용할 수 없고 제한된 기능들을 간접적을 제공하고 싶을 때

* 그럴 떄 `API`라는 것이 프로그램과 프로그램 사이의 중개자 역할을 해준다.

* 즉, `API는 쉽게 이야기하면 규칙들의 집합이다.` API가 대신해주는 프로그램의 기능들을 미리 정리해서 규칙들을 잘 세워두면 클라이언트는 접근할 프로그램을 잘 모르더라도 API에 따라 손쉽게 통신할 수 있게 된다.

## API의 역할은?

1.  API는 서버와 데이터베이스에 대한 출입구 역할을 한다.

2.  API는 애플리케이션과 기기가 원활하게 통신할 수 있도록 한다.

3.  API는 모든 접속을 표준화한다.

![api](/image/api2.png)

- 클라이언트와 서버는 많은 대화 하는데 위와같이 규칙이 없이 마구잡이식으로 대화를 한다면 서버는 해당 요청들을 하나씩 대신 입력해 줄 수 없다.

![api](/image/api3.png)

- 이를 해결하기 위해 "앞으로 클라이언트와 서버가 대화할 때는 `[서버야/ 이 동작을/ 여기에 해줘]` 처럼 하자" 라는 규칙을 정하면 된다.

- 마구잡이식으로 했던 대화를 이 대화 규칙에 맞추면 아래와 같은 형태가 되는 거다.
  1. 회원가입시켜줘 -> [서버야/ 만들어줘/ 아이디]
  2. 영상지워줘 -> [서버야/ 지워줘/ 영상]
  3. 댓글수정해줘 -> [서버야/ 수정해줘/ 댓글]

* `이러한 대화의 규칙을 API라고 부른다.`

* API의 규칙은 개발자 마음대로이다. 물론 혼자 쓴다면 마음대로 규칙을 써서 해도 문제가 없겠지만 API는 클라이언트와 서버 뿐만 아니라 내 서비스와 다른 서비스 사이에서도 일어난다.

* 예를 들어 앱에 날씨 기능을 추가하고 싶으면 기상청 서버가 만든 API 규칙에 맞춰 `[기상청아/ 줘/ 내일날씨]`같은 메시지를 보내야한다. 하지만 기상청이 나만 아는 방식으로 API를 만들었다면? 개발자들이 아주 불편할 것이다.

* 그래서 전 세계의 개발자들이 "야 안되겠다 이거 통일하자"라는 생각을 하기 시작하고 앞서 말한 모든 `요청들을 4가지로 딱 나눴다.`

```
올려줘 : POST

불러와줘 : GET

수정해줘 : PUT / PATCH

지워줘 : DELETE
```

- 대답도 간단해 졌다.

```
200 : 좋아

400 : 니가 잘못해서 싫어

500 : 내가 잘못해서 싫어
```

![api](/image/api4.png)

- 이렇게 함꼐 만든 통일된 대화 규칙을 `REST API`라고 부른다.

> 예를 들어, 클라이언트가 "영화 빅쇼트 보여줘!" 라고 요청한다면 "GET MOVIE/BIG SHORT" 라는 요청을 보낼 것이고 서버는 "200"이라는 응답을 할 것이다.

> ## + 추가 총정리
>
> ![api](/image/api5.png)
>
> - 프로그램 - api - 프로그램 딱 정의해서 생각하기 보단 `서로 다른 시스템이 서로 상호 작용`하기 위한 인터페이스다 라고 생각하면 될 것 같다.
>
> * 뭔가를 쉽게 이용할 수 있게 제공하는 것이 api이다.
>
> - 누구든지 api 규칙에만 맞게 쓰면 그 기능을 쓸 수 있는 것
>
> - 웹 문서를 브라우저가 이해하게 하려면 브라우저 렌더링 엔진이 문서를 로드하고 파싱하여 문서를 브라우저가 이해할 수 있는 객체로 만드는데 그걸 DOM이라고 하고 그 DOM 안에는 텍스트부터해서 관련 메소드들이 있고 그것의 부모관계 등 여라가지 정보들이 있다. 그 후 DOM들에 동적인 요소를 적용하여야하는 경우가 생기는데 그떄 사용하는 도구들이 API이다.

- REST API는 정보들이 주고받아지는 데 있어서 개발자들 사이에 널리 쓰이는 일종의 `형식`이다.

![rest](/image/rest.png)

- 우체국에 가면 송장들이 마련돼 있고, 이용자들은 그걸 채워넣는 것처럼 어떤 기술이나 제품이 아니라, 형식이기 떄문에 우리가 어떤 프로그래밍 언어를 쓰든 무슨 프레임 워크를 쓰든, 뭐에다 소프트웨어를 만들든 이 형식에 맞춰서 기능을 만들어내면 되는거다.

- API란? 어떤 기계를 만들면 사용자가 그 기능들을 전부 활용할 수 있도록 제어장치를 마련해야 한다. 예를들면, TV는 채널을 선택하고, 음량을 조절할 수 있게 해줘야 한다. 그래서 `리모컨(API)`이 있는것이다. 같은 이유로 자판기에는 `버튼(API)`이 있고 컴퓨터에는 `키보드와 마우스(API)`가 있다. 이런 것들을 인터페이스라고 부른다. 즉, 기계와 인간 간의 소통창구이다.

* 소프트웨어 영역으로 들어가보면, 컴퓨터나 스마트폰을 켜보면 사용자들이 프로그램이나 사이트, 앱을 원하는대로 제어하고 정보를 볼 수 있도록 버튼,스크롤바,슬라이더,브라우저 창 등 소프트웨어적인 장치들이 마련돼있다. UI 소프트웨어와 인간의 소통을 위한 User Interface이다.

* 하지만 IT세계에는 우리 눈에 직접 보이지 않는 영역들이 더 많다. 기계와 기계,
  소프트웨어 와 소프트웨어 사이에서도 수많은 요청과 정보 교환이 이뤄지고 있다.
  이들 사이에도 소통할 수 있는 창구가 필요하다. 소프트웨어가 다른 소프트웨어로부터 지정된 형식으로 요청, 명령을 받을 수 있는 수단을 API라고 한다. `꼭 네트워크 상에서만 API가 있는것은 아니다.`

* REST API는 프론트엔드 웹에서 서버에 데이터를 요청하거나 배달 앱에서 서버에 주문을 넣거나 등 이런 서비스들에서 오늘날 널리 사용되는 것이 REST라는 형식의 API이다. 과거의 SOAP이란 복잡한 형식을 대체 한 것이다.

* REST의 가장 중요한 특성은 각 요청이 어떤 동작이나 정보를 위한 것인지를 그 요청의 모습 자체로 추론 가능하다는 것이다.

* 사실 만들고자 하는 서비스에서 기능 자체만 중요하게 생각한다면 REST고 뭐고 생각 할 필요 없이 동작만 하게 내 마음대로 규칙을 짜서 이에 맞는 요청을 보내는 앱을 짜면 서비스의 기능 자체에는 아무런 문제가 없다. 하지만, 문제는 서비스를 이 개발자 혼자 만드는게 아니란 것이다. 당장은 혼자라도 나중에 이 일을 인계받을 개발자나, 이 API를 사용해서 다른 제품을 만들 개발자들은 굉장히 일하기 힘들어 질 것이다. RESTful하게 만든 API는 요청을 보내는 주소만으로도 대략 이게 뭘 하는 요청인지 파악이 가능하다.

> ## ++ 추가 정리
>
> `API는 쉽게 이야기하면 규칙들의 집합이다.` API가 대신해주는 프로그램의 기능들을 미리 정리해서 규칙들을 잘 세워두면 클라이언트는 접근할 프로그램을 잘 모르더라도 API에 따라 손쉽게 통신할 수 있게 된다.
>
> 브라우저에서 html을 이용하고 싶다면 dom api를 쓰는 것이고 브라우저에서 서버와 통신하기 하고 싶다면 fetch api를 쓰는 것이다.
>
> 꼭 네트워크 상에서만 API가 있는 것은 아니다.
>
> 네트워크 상에서의 api 중 요청을 보내는 규칙 같은 것들을 내 마음대로 정해서 그 형식에 맞는 요청을 보내면 서비스의 기능 자체에는 아무런 문제가 없지만, 지만, 문제는 서비스를 이 개발자 혼자 만드는게 아니란 것이다. 당장은 혼자라도 나중에 이 일을 인계받을 개발자나, 이 API를 사용해서 다른 제품을 만들 개발자들은 굉장히 일하기 힘들어 질 것이다.
>
> REST API는 정보들이 주고받아지는 데 있어서 개발자들 사이에 널리 쓰이는 일종의 `형식`이다. 그래서 REST 형식을 써서 보통 사용한다.(공통적으로)

> api는 프로그램 - api - 프로그램 딱 정의해서 생각하기 보단 서로 다른 시스템이 서로 상호작용 하기 위한 인터페이스이고 뭔가를 쉽게 이용할 수 있게 미리 규칙을 정해 놓고 누구든지 api 규칙에만 맞게 쓰면 그 기능을 쓸 수있는 것이라고 해석하면 될까요? 그래서 브라우저에서 html을 쓰고 싶다면 dom을 쓰는것이고
>
> 또, 나중에 dom들에 동적인 요소를 적용하여야 하는 경우가 생기는데 그떄 사용하는 것들이 네트워크 통신을 위한 fetch api이고 딱 규칙의 틀(형식)을 개발자들이 임의로 정한것이 REST API
