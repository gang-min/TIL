# URL을 통해 서버 구조 이해하기

![URL](/image/URL.png)

- URL 구성 요소를 보면 순서대로 아래와 같이 나눌 수 있다.

  1. 프로토콜

  2. 호스트 주소

  3. 포트 번호

  4. 경로

  5. 쿼리

- URL 구성 요소는 서버와 통신하기 우해서 필수적으로 알아야 한다.

- `프토토콜`

  - 프로토콜은 `컴퓨터 간 통신 규격`을 말한다.

    - HTTP : 가장 대중적인 통신 방식

    - FTP : 파일 통신에 사용됨

    - SSH : 컴퓨터 원격 접근할 때 사용됨

    - SMTP : 이메일을 통시할 때 사용됨

    - 등등...

  * `프로토콜`은 컴퓨터끼리 네트워크 통신을 할 때 규격이다. 우리가 웹을 이용할 때는 HTTP 프로토콜을 이용한다. 그리고 요즘은 HTTP에 보안을 더한 HTTPS 프로토콜이 많이 사용되고 있다. (실제로 HTTP 프로토콜의 규격과 동일하다고 보면 된다.)

  * [HTTP 프로토콜이란? ](https://github.com/gang-min/TIL/blob/main/Server/HTTP.md)

* `호스트 주소`

  - 호스트 주소는 `도메인 네임 혹은 IP 주소`가 들어간다고 보면 된다.

    ![도메인](/image/도메인.png)

  * 보통 우리가 브라우저에서 입력하는 영문주소는 전부 DNS(Domain Name Server)에 등록된 주소이다. 그래서 Domain Name을 이용한다면 DNS를 거쳐서 IP를 반환받는 작업이 필요하다.

    ![DNS](/image/DNS.png)

  > 웹을 접속할 때 뿐만 아니라, 클라이언트가 서버(API서버, 데이터베이스 서버) 등과 통신할 때 Domain Name(URL)을 이용해서 정보를 주고 받는다.

  > 보통 서버의 Domain Name을 붙이기 위해서는 호스팅 서비스(가비아, 후이즈 등)에서 Domain Name을 구매한다.

  - IP 주소의 경우 크게 내 컴퓨터 안에서 통신하는 내부 IP주소와 바깥 컴퓨터와 통신하는 외부 IP주소가 있다.

    ![localhost](/image/localhost.png)

  - 위에 보이는 `localhost`는 내부 컴퓨터 주소를 가리킨다. 보통 서버 개발자들은 본인의 컴퓨터에서 서버 개발을 하기 떄문에 localhost 주소로 서버를 사용한다.

  - 그러다 나중에 클라우드라는 곳에 서버를 올리게 되면 `외부 IP 주소`를 이용해서 서버 통신을 하게 된다.

* `포트 번호`

  ![포트번호](/image/포트번호.png)

  - `포트 번호`는 컴퓨터에서 실행되고 있는 수많은 프로세스들의 주소이다. 그런데 우리가 사용하는 URL을 살펴보면 포트번호가 보이지 않는다. 예를 들면, 네이버를 들어가도 `https://www.naver.com` 이렇게 되어 있다.

  - `기본적으로 포트번호를 입력하지 않았을 때는 프로토콜이 가지고 있는 기본 포트번호가 적용된다.` HTTP의 경우 80번, HTTPS의 경우 443번의 포트번호가 기본으로 적용된다. 그래서 실제로 네이버의 주소는 `https://www.naver.com:433` 이라고 봐도 무방하다.

> react프로그램은 3000번의 포트번호를 사용하고, node 서버 프로그램은 8080번의 포트번호를 사용한다.

- `경로(path)`

  ![경로](/image/경로.png)

  - 경로는 서버 프로그램 내에 짜인 로직으로 가는 영역이다.

  - 보통 서버를 개발하시는 분들은 각 경로에 맞춰 코드를 짠다. 예를 들어, /products 라는 경로는 상품 정보를 전달하도록 로직을 설계하고, /banners 라는 경로는 배너 정보를 전달하도록 개발한다.

- `쿼리`

  ![쿼리](/image/쿼리.png)

  - URL의 마지막 구성 요소로 `query(쿼리)`가 있다. query는 URL에서 추가적인 데이터를 표현할 때 사용한다.

  - 쿼리는 경로(path) 뒤에 `?`를 기점으로 해서 `key=value` 형태로 데이터를 표현하게 된다.

  - 실제로 유튜브 URL을 보면 `https://www.youtube.com/watch?v=nHk-AdY1588` query 데이터에 따라 각기 다른 영상을 보여주는 걸 확인할 수 있다.
