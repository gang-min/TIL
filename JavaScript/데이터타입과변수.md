# 데이터 타입과 변수

## 1. `변수`

- 변수(variable)

  - 변수는 값의 위치(주소)를 기억하는 저장소이다. 값의 위치란 값이 위치하고 있는 메모리 상의 주소(address)를 의미한다.

  - 즉, 변수란 값이 위치하고 있는 메모리 주소에 접근하기 위해 사람이 이해할 수 있는 언어로 명명한 식별자(Identifier)이다.

  - 변수에 명시한 고유한 식별자를 변수명이라 하고 변수로 참조할 수 있는 데이터를 변수값 이라 한다.

  > 사람을 고유한 이름으로 구별하듯이 변수도 사람이 이해할 수 있는 언어로 지정한 고유한 식별자(변수명)에 의해 구별하여 참조할 수 있다. 데이터는 메모리에 저장되어 있다. 메모리에 저장된 데이터를 참조하려면 데이터가 저장된 메모리 상의 주소(address)를 알아야 한다. 식별자는 데이터가 저장된 메모리 상의 주소를 기억한다. 따라서 식별자를 통해 메모리에 저장된 값을 참조할 수 있다. 또한 변수명을 통해 데이터의 의미를 명확히 할 수 있어 코드의 가독성이 좋아지는 효과도 있다.

  > 식별자는 어떤 대상을 유일하게 식별할 수 있는 이름을 말한다. 식별자에는 변수명, 함수명, 프로퍼티명, 클래스명 등이 있다.

- 변수 사용 목적

  - 변수는 프로그램에서 사용되는 데이터를 일정 기간 동안 기억하여 필요한 때에 다시 사용하기 위해

  - 즉, 애플리케이션에서 한번 쓰고 버리는 값이 아닌 값이 일정 기간 유지할 필요가 있는 값에 사용한다.

  - 변수에 저장된 값의 `재사용`

- 변수 선언 방법

  - 변수는 `var`, `let`, `const` 키워드를 사용하고 `선언`하고 `할당 연산자(=)`를 사용해 값을 `할당`한다. 그리고 `식별자`인 변수명을 사용해 변수에 `저장된 값`을 `참조`한다.

  > var 변수는 여러가지 문제점들이 있다. 이를 보완하기 위해 ES6에서 let과 const키워드를 도입하였다.

```
var score;    // 변수의 선언

score = 80;   // 값의 할당

score = 90;   // 값의 재할당

score;        // 변수의 참조


// 변수의 선언과 할당을 동시에

var average = (50 + 100) / 2;
```

- 변수명(식별자) 명명 규칙

  - JavaScript는 대/소문자를 구별하므로 사용할 수 있는 문자는 "A"
    ~ "Z"(대문자) 와 "a" ~ "z"(소문자)이다.

  - 키워드(예약어) 사용 불가

  - 숫자로 시작 불가

  - 반드시 영문자(특수 문자 제외), underscore(\_), 달러기호($)로 시작하여야 한다. 이어지는 문자에는 숫자도 사용할 수 있다.

  - 공백 문자 포함 불가

## 2. `var 변수의 문제점`

- 2-1. 변수의 중복 선언

  - var 키워드로 선언한 변수는 중복 선언이 가능하다. 다시 말해 변수명이 같은 변수를 중복해 선언해도 에러가 발생하지 않는다.

  - 변수 x 는 중복 선언되었다. 이처럼 var 키워드를 사용하여 변수를 중복 선언하면 에러없이 이전 변수의 값을 덮어쓴다. 만약 동일한 변수명이 선언되어 있다는 것을 모르고 변수를 중복 선언했다면 의도치 않게 변수의 값을 변경하는 부작용을 발생 시킨다. 따라서 변수의 중복 선언은 문법적으로 허용되지만 사용하지 않는 것이 좋다.

  ![var 중복선언](/image/var중복선언.png)

- 2-2. 정의된 변수가 `함수 레벨 스코프(function-level scope)`를 가진다.

  - JavaScript var변수는 다른 C-family와는 달리 `블록 레벨 스코프(block-level scope)`를 가지지 않고 `함수 레벨 스코프(function-level scope)`를 갖는다.

  - 그래서 for문, while문, switch문, if문 등 함수 내부에서 작성되는 모든 코드가 계속 남아 있는 문제가 있다.

  - 스코프란 변수가 사용될 수 있는 영역을 말한다.

  - 변수의 유효 범위(scope)는 좁을수록 좋다.

  > 단, ECMAScript 6에서 도입된 let, const 키워드를 사용하면 블록 레벨 스코프를 사용할 수 있다.

- 2-3. var 키워드 생략 허용

  - 함수 안에사 var 키워드를 생략하고 변수에 값을 할당하면 전역 변수가 된다. (의도치 않은 변수의 전역화);

- 2-4. 재할당 가능한 변수로 밖에 만들 수 없다.

  - 즉, 상수로 쓰일 값도 무조건 재할당 변수로 만들어진다.

- 2-5. `var 변수 hoisting`

  ![hoisting](/image/hosting.png)

  - var 키워드를 사용하여 선언한 변수는 중복 선언이 가능하기 떄문에 위의 코드는 문법적으로 문제가 없다.

  - ①에서 변수 foo는 아직 선언되지 않았으므로 ReferenceError: foo is not defined가 발생할 것을 기대했겠지만 콘솔에는 `undefined`가 출력된다.

  - 이것은 다른 C-family 언어와는 차별되는 자바스크립트의 특징으로 var 선언문이나 function 선언문은 `호이스팅(Hoisting)`되기 때문이다.

  - 호이스팅이란 var 선언문이나 function 선언문이 해당 Scope의 선두로 옮겨진 것처럼 동작하는 특성을 말한다. 즉, 선언이 되기 이전에 참조가 가능하다.

  - 변수는 3단계에 걸쳐 생성된다.

```
    1. 선언 단계(Declaration phase)

    : 변수 객체(Variable Object)에 변수를 등록한다. 이 변수 객체는 스코프가 참조하는 대상이 된다.

    2. 초기화 단계(Initialization phase)

    : 변수 객체(Variable Object)에 등록된 변수를 메모리에 할당한다. 이 단계에서 변수는 undefined로 초기화된다.

    3. 할당 단계(Assignment phase)

    : undefined로 초기화된 변수에 실제값을 할당한다.

```

- var 키워드로 선언된 변수는 `선언 단계와 초기화 단계가 한번에 이루어진다.` 즉, 스코프에 변수가 등록되고 변수는 메모리에 공간을 확보한 후 undefined로 초기화된다. 따라서 변수 선언문 이전에 변수에 접근하여도 Variable Object가 존재하기 떄문에 에러가 발생하지 않고 undefined를 반환한다.

  ![hoisting](/image/hoisting2.png)

  - 이러한 현상을 `변수 호이스팅` 이라한다.

  - 앞에서 살펴본 예제를 호이스팅 관점에서 다시 보면

  - ①이 실행되기 이전에 var foo = 123;이 호이스팅되어 ①구문 앞에 var foo;가 옮겨진다.(실제로 변수 선언이 코드 레벨로 옮겨진 것은 아니고 변수 객체(Variable object)에 등록되고 undefined로 초기화된 것이다.) 하지만 변수 선언 단계와 초기화 단계가 할당 단계와 분리되어 진행되기 때문에 이 단계에서는 foo에는 undefined가 할당되어 있다. 변수 foo에 값이 할당되는 것은 2행에서 실시된다.

  - ②에서는 변수에 값이 할당되었기 때문에 123이 출력된다.

  - 자바스크립트의 변수는 다른 C-family와는 달리 블록 레벨 스코프(block-level scope)를 가지지 않고 함수 레벨 스코프(function-level scope)를 갖는다.

  - 따라서 코드 블록 내의 변수 foo는 전역변수이므로 전역에 선언된 변수 foo에 할당된 값을 재할당하기 때문에 ③의 결과는 456이 된다.

> 이러한 문제점들을 보완하기 위해 ES에서 let과 const 키워드를 도입하였다.

## 3. `데이터 타입(자료형)`

- 데이터 타입(Data Type)은 프로그래밍 언어에서 사용할 수 있는 데이터(number), string, boolean 등)의 종류를 말한다.

- typeof 연산자

  ![typeof](/image/typeof.png)

  > typeof null // 설계상의 오류로 object가 나오는 것처럼 모든 데이터의 타입을 확인하기에는 한계가 있다.

- `자바스크립트의 모든 값은 데이터 타입을 갖는다.` ECMAScript 표준(ECMAScript 2015 (6th Edition), 이하 ES6)은 7개의 데이터 타입을 제공한다

  - `원시 타입(primitive data type)`

    - number

    - string

    - boolean

    - undefined

    - null

    - symbol(ES6에서 추가)

  - `객체 타입(object / reference type)`

    - object

- JavaScript에서 제공하는 7개의 데이터 타입은 크게 원시 타입(primitive data type)과 객체 타입(object/reference type)으로 구분할 수 있다.

- 3-1. 원시 타입(primitive data type)

  - 원시 타입의 값은 `변경 불가능한 값(immutable value)`이며, `pass-by-value(값에 의한 전달)`이다.

  > 변경은 불가능하지만 재할당은 가능하다. 기존 값을 변경하는 것이 아니라 새로운 값을 할당하는 것이기 떄문이다.

  1.  `number`

      - C나 Java의 경우, 정수와 실수를 구분하여 int, long, float, double 등과 같은 다양한 숫자 타입이 존재한다. 하지만 자바스크립트는 독특하게 하나의 숫자 타입만 존재한다.

      - 부호(+, -)를 가진 값

      - 추가적으로 3가지 특별한 값들도 표현 할 수 있다.

        - infinity : 양의 무한대
        - -infinity : 음의 무한대
        - NaN: 산술 연산 불가 (Not-a-Number)

  2.  `string`

      - 문자열(String) 타입은 텍스트 데이터를 나타내는데 사용한다.

      - 문자열은 작은 따옴표(‘’) 또는 큰 따옴표(“”) 안에 텍스트를 넣어 생성한다.

  3.  `boolean`

      - 불리언(boolean) 타입의 값은 논리적 참, 거짓을 나타내는 `true`와 `false` 뿐이다.

  4.  `undefined`

      - undefined 타입의 값은 `undefined`가 유일하다. `선언 이후 값을 할당하지 않은 변수는 undefined 값`을 가진다. 즉, 선언은 되었지만 값을 할당하지 않은 변수에 접근하거나 존재하지 않는 객체 프로퍼티에 접근할 경우 undefined가 반환된다.

      - 이는 변수 선언에 의해 확보된 메모리 공간을 처음 할당이 이루어질 때까지 빈 상태(대부분 비어있지 않고 쓰레기 값(Garbage value)이 들어 있다)로 내버려두지 않고 자바스크립트 엔진이 undefined로 초기화하기 때문이다.

      - 이처럼 undefined는 `개발자가 의도적으로 할당한 값이 아니라` `자바스크립트 엔진에 의해 초기화된 값`이다.

  5.  `null`

      - null 타입의 값은 `null`이 유일하다.

      - 개발자가 의도적으로 빈 값을 주고 싶다면 undefined가 아닌 null을 할당한다.

      - 자바스크립트는 대소문자를 구별(case-sensitive)하므로 null은 Null, NULL등과 다르다.

      > 타입을 나타내는 문자열을 반환하는 typeof 연산자로 null 값을 연산해 보면 null이 아닌 object가 나온다. 이는 자바스크립트의 설계상의 오류이다. 따라서 null 타입을 확인할 때 typeof 연산자를 사용하면 안되고 일치 연산자(===)를 사용하여야 한다.

      ![null](/image/null.png)

  6.  `symbol`

      - 심볼(symbol)은 ES6에서 새롭게 추가된 7번째 타입으로 변경 불가능한 원시 타입의 값이다. 심볼은 주로 이름의 충돌 위험이 없는 유일한 객체의 프로퍼티 키(property key)를 만들기 위해 사용한다. 심볼은 Symbol 함수를 호출해 생성한다. 이때 생성된 심볼 값은 다른 심볼 값들과 다른 유일한 심볼 값이다.

- 3-2. 객체 타입(object / reference type)

  - 객체는 데이터와 그 데이터에 관련한 동작(절차, 방법, 기능)을 모두 포함할 수 있는 개념적 존재이다. 달리 말해, 이름과 값을 가지는 데이터를 의미하는 프로퍼티(property)와 동작을 의미하는 메소드(method)를 포함할 수 있는 독립적 주체이다.

  - 자바스크립트는 객체(object) 기반의 스크립트 언어로서 자바스크립트를 이루고 있는 거의 “모든 것”이 객체이다. `원시 타입(Primitives)을 제외한 나머지 값들(배열, 함수, 정규표현식 등)은 모두 객체`이다. 또한 객체는 `pass-by-reference(참조에 의한 전달)` 방식으로 전달된다.

## 4. `동적 타이핑 (Dynamic Typing)`

- JavaScript는 동적 타입(dynamic/weak type) 언어이다. 이것은 변수의 타입 지정(Type annotation)없이 값이 할당되는 과정에서 값의 타입에 의해 자동으로 타입이 결정(Type Inference)될 것이라는 뜻이다. 따라서 같은 변수에 여러 타입의 값을 할당할 수 있다. 이를 동적 타이핑(Dynamic Typing)이라 한다.

  ![동적타이핑](/image/동적타이핑.png)
